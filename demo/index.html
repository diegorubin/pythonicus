<html>
  <head>
    <title>Demonstração do Pythonicus</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
  </head>

  <style type="text/css">
    body{text-align: center;}
    #col1{ width: 40%; float: left; text-align: center; height: 400px; margin: 10px; }
    #texto{ height: 350px; width: 100%;}
    #col2{ width: 40%; float: left; text-align: center; }
    #footer{ width: 100%; text-align: center; clear: both; }
  </style>

  <body>

    <div id="col1">
      <h3>Texto</h3>
      <textarea id="texto"></textarea>
      <input type="submit" id="analisar" />
      <input type="hidden" id="hash" value="" />
    </div>

    <div id="col2">
      <h3>Termos</h3>
      <div id="terms">
        <p id="resultbody">
        </p>
      </div>
    </div>

    <div id="footer">
      Desenvolvido por <a href="http://diegorubin.com">diegorubin.com</a>
    </div>

  </body>
  <script src="http://code.jquery.com/jquery-1.7.1.min.js" type="text/javascript"></script>
  <script type="text/javascript">

    function loadText(hash) {

      $.ajax({
        type: "GET",
        dataType: "json",
        url: "/documents/" + hash,
        success: function(data){
          $("#resultbody").html(JSON.stringify(data));
        }
      });
 
    }

    $("#analisar").click(function(event) {
      var obj = {};
      var url = "/documents";

      var hash = $("#hash").val();

      if(hash != "") url = url + "/" + hash;


      obj['title'] = "Demo text";
      obj['text'] = $("#texto").val();

      $.ajax({
        type: "POST",
        dataType: "json",
        data: JSON.stringify(obj),
        url: '/documents',
        success: function(data){
          $("#hash").val(data['id']);
          loadText(data['id']);
        }
      });
      event.preventDefault();
    });

  </script>
</html>
